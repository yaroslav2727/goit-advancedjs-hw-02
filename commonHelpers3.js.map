{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\niziToast.settings({\n  position: \"topRight\",\n  timeout: 2500,\n});\n\ndocument.querySelector(\".form\").addEventListener(\"submit\", onSubmit);\n\nfunction onSubmit(event) {\n  event.preventDefault();\n\n  const { amount, step, delay } = event.target.elements;\n\n  amount.setAttribute(\"disabled\", \"\");\n  step.setAttribute(\"disabled\", \"\");\n  delay.setAttribute(\"disabled\", \"\");\n  event.target.lastElementChild.setAttribute(\"disabled\", \"\");\n\n  if (Number(amount.value) < 0) {\n    amount.value = (Number(amount.value) * -1).toString();\n  }\n  if (Number(step.value) < 0) {\n    step.value = (Number(step.value) * -1).toString();\n  }\n  if (Number(delay.value) < 0) {\n    delay.value = (Number(delay.value) * -1).toString();\n  }\n\n  for (let i = 0; i < Number(amount.value); i += 1) {\n    const realDelay = Number(step.value) * i + Number(delay.value);\n    createPromise(i + 1, realDelay)\n      .then(res => {\n        iziToast.success({\n          message: res,\n        });\n        console.log(`✅ ${res}`);\n      })\n      .catch(err => {\n        iziToast.error({\n          message: err,\n        });\n        console.log(`❌ ${err}`);\n      })\n      .finally(() => {\n        if (Number(amount.value) - i === 1) {\n          event.target.lastElementChild.removeAttribute(\"disabled\");\n          amount.removeAttribute(\"disabled\");\n          step.removeAttribute(\"disabled\");\n          delay.removeAttribute(\"disabled\");\n          event.target.reset();\n        }\n      });\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((res, rej) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        res(`Fulfilled promise ${position} in ${delay}ms`);\n      } else {\n        rej(`Rejected promise ${position} in ${delay}ms`);\n      }\n    }, delay);\n  });\n}\n"],"names":["iziToast","onSubmit","event","amount","step","delay","i","realDelay","createPromise","res","err","position","shouldResolve","rej"],"mappings":"wIAGAA,EAAS,SAAS,CAChB,SAAU,WACV,QAAS,IACX,CAAC,EAED,SAAS,cAAc,OAAO,EAAE,iBAAiB,SAAUC,CAAQ,EAEnE,SAASA,EAASC,EAAO,CACvBA,EAAM,eAAc,EAEpB,KAAM,CAAE,OAAAC,EAAQ,KAAAC,EAAM,MAAAC,CAAO,EAAGH,EAAM,OAAO,SAE7CC,EAAO,aAAa,WAAY,EAAE,EAClCC,EAAK,aAAa,WAAY,EAAE,EAChCC,EAAM,aAAa,WAAY,EAAE,EACjCH,EAAM,OAAO,iBAAiB,aAAa,WAAY,EAAE,EAErD,OAAOC,EAAO,KAAK,EAAI,IACzBA,EAAO,OAAS,OAAOA,EAAO,KAAK,EAAI,IAAI,YAEzC,OAAOC,EAAK,KAAK,EAAI,IACvBA,EAAK,OAAS,OAAOA,EAAK,KAAK,EAAI,IAAI,YAErC,OAAOC,EAAM,KAAK,EAAI,IACxBA,EAAM,OAAS,OAAOA,EAAM,KAAK,EAAI,IAAI,YAG3C,QAASC,EAAI,EAAGA,EAAI,OAAOH,EAAO,KAAK,EAAGG,GAAK,EAAG,CAChD,MAAMC,EAAY,OAAOH,EAAK,KAAK,EAAIE,EAAI,OAAOD,EAAM,KAAK,EAC7DG,EAAcF,EAAI,EAAGC,CAAS,EAC3B,KAAKE,GAAO,CACXT,EAAS,QAAQ,CACf,QAASS,CACnB,CAAS,EACD,QAAQ,IAAI,KAAKA,GAAK,CAC9B,CAAO,EACA,MAAMC,GAAO,CACZV,EAAS,MAAM,CACb,QAASU,CACnB,CAAS,EACD,QAAQ,IAAI,KAAKA,GAAK,CAC9B,CAAO,EACA,QAAQ,IAAM,CACT,OAAOP,EAAO,KAAK,EAAIG,IAAM,IAC/BJ,EAAM,OAAO,iBAAiB,gBAAgB,UAAU,EACxDC,EAAO,gBAAgB,UAAU,EACjCC,EAAK,gBAAgB,UAAU,EAC/BC,EAAM,gBAAgB,UAAU,EAChCH,EAAM,OAAO,QAEvB,CAAO,CACJ,CACH,CAEA,SAASM,EAAcG,EAAUN,EAAO,CACtC,MAAMO,EAAgB,KAAK,OAAM,EAAK,GACtC,OAAO,IAAI,QAAQ,CAACH,EAAKI,IAAQ,CAC/B,WAAW,IAAM,CACXD,EACFH,EAAI,qBAAqBE,QAAeN,KAAS,EAEjDQ,EAAI,oBAAoBF,QAAeN,KAAS,CAEnD,EAAEA,CAAK,CACZ,CAAG,CACH"}